<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Schedule</title>
	<style>
		table, th, td {
			border: 1px solid black;
			border-collapse: collapse;
		}
		td.mergedTop {
			border-bottom: 1px dotted black;
		}
		td.mergedBottom {
			border-top: 1px dotted black;
		}
		th {
			font-family: "Times New Roman", Times, sans-serif;
			padding: 5px;
		}
		td {
			padding: 5px;
		}
	</style>
</head>
<body>
	<div id="container">
	</div>
	<script src="js/jquery.js"></script>
	<script type="text/javascript">
		function sizeOf(obj) {
			var size = 0;
			for (var i = 0; i < obj.length; i++) {
				if (typeof(obj[i]) == "string") {
					size++;
				} else {
					size += 2;
				}
			}
			return size;
		};
		var days = ["Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"];
		$.ajax({
			url: "php/full.php",
			data: "group=4901",
			success: function(data){
				var response = $.parseJSON(data);
				$("#container").append("<table>");
				for (var i = 0 ; i < response.length; i++) {
					var content = "<tr><th rowspan=" + sizeOf(response[i].schedule) + ">" + days[i] + "</th>";
					if (typeof(response[i].schedule[0]) == "string") {
						content += "<td>" + response[i].time[0] + "</td><td>" + response[i].schedule[0] + "</tr>";
					} else {
						content += "<td rowspan=\"2\">" + response[i].time[0] + "</td><td  class=\"mergedTop\">" + response[i].schedule[0].top + "</tr><tr><td  class=\"mergedBottom\">" + response[i].schedule[0].bottom + "</td>";
					}
					content += "</tr>"

					for (var j = 1; j < response[i].schedule.length; j++) {
						content += "<tr>"
						if (typeof(response[i].schedule[j]) == "string") {
							content += "<td>" + response[i].time[j] + "</td><td>" + response[i].schedule[j] + "</td>";
						} else {
							content += "<td rowspan=2>" + response[i].time[j] + "</td><td  class=\"mergedTop\">" + response[i].schedule[j].top + "</td></tr><tr><td  class=\"mergedBottom\">" + response[i].schedule[j].bottom + "</td>";
						}
						content += "</tr>"
					}
					$("#container").append(content);
				}
				$("#container").append("</table>");
			}
		});
	</script>
</body>
<html>
